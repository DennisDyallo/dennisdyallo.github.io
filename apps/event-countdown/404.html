<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      // Get the base path from the 404 page's location.
      // e.g., if at /apps/event-countdown/404.html, basePath is /apps/event-countdown/
      const basePath = window.location.pathname.replace(/404.html$/, '');

      // Get the path that should have been loaded.
      // It's stored in sessionStorage by the script in index.html.
      const redirect = sessionStorage.getItem('redirect');
      sessionStorage.removeItem('redirect');

      // If a redirect path exists, navigate to the index.html with the correct path info.
      if (redirect) {
        // Reconstruct the full path relative to the root.
        const targetPath = basePath + redirect.substring(1); // remove leading '/' from stored path
        window.location.href = targetPath;
      } else {
        // If there's no redirect info, just go to the app's root.
        window.location.href = basePath;
      }
    </script>
  </head>
  <body>
  </body>
</html>
